{% extends 'base/base-details-page.html' %}
{% load date_convert_filter %}
{% load calculate_arrival_time %}

{% block logic %}
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Route:</strong>
    <p class="mb-0 mt-1">{{ assignment.route }}</p>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Driver:</strong>
    <p class="mb-0 mt-1">{{ assignment.driver.full_name }}</p>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Vehicle:</strong>
    <p class="mb-0 mt-1">{{ assignment.vehicle }}</p>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Start Date and Time:</strong>
    <p class="mb-0 mt-1">{{ assignment.assignment_start|date_convert }}, 8:00</p>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Arrival Date and Time:</strong>
    <p class="mb-0 mt-1">{% calculate_eta assignment %}</p>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Points for delivery:</strong>
    <ul class="mb-0 mt-1 ps-4">
        {% for point in assignment.route.points_for_delivery.all %}
            <li>{{ point.name }}</li>
        {% empty %}
            <li>No delivery points.</li>
        {% endfor %}
    </ul>
</div>
<div class="mb-3 p-3 bg-white rounded-4">
    <strong>Notes:</strong>
    {% if  assignment.notes %}
        <p class="mb-0 mt-1">{{ assignment.notes }}</p>
    {% else %}
        <p class="mb-0 mt-1">No notes for this assignment.</p>
    {% endif %}
</div>
<div class="mt-4 text-center">
    <a href="{% url 'routes:assignment_list' %}" class="btn btn-dark rounded-5 px-5">Back</a>
    <a href="{% url 'routes:assignment_edit' pk=assignment.id %}" class="btn btn-success rounded-5 px-5">Edit</a>
    <a href="{% url 'routes:assignment_delete' pk=assignment.id %}" class="btn btn-danger rounded-5 px-5">Delete</a>
</div>
{% endblock %}